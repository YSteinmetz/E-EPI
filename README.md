

<h1>INTRODUÇÃO </h1>


Acidentes de trabalho causam problemas incalculáveis tanto para o trabalhador, quanto para a empresa que possui perdas de ativos tangíveis, intangíveis e capital humano. O Brasil tem sido um dos países que mais sofrem com esse importante problema, onde ocorreu, neste século, um acidente de trabalho fatal a cada duas horas e meia, conforme \citeonline{Mattos}.  O autor complementa que nos países em desenvolvimento 10\% do \gls{pib} é perdido devido a doenças e agravos ocupacionais que, além da morte e de sofrimento para o trabalhador e para sua família, problemas ainda pouco estudados, os acidentes de trabalho têm reflexos socioambientais, econômicos e políticos para toda a sociedade.
O \gls{tst} define acidente de trabalho, no artigo 19 da Lei nº 8.213 de 1991, como:
 

\begin{citacao}
Acidente de trabalho é o que ocorre pelo exercício do trabalho a serviço da empresa ou pelo exercício do trabalho dos segurados referidos no inciso VII do art. 11 desta lei, provocando lesão corporal ou perturbação funcional que cause a morte ou a perda ou redução, permanente ou temporária, da capacidade para o trabalho. Ao lado da conceituação acima, acidente de trabalho típico, por expressa determinação legal, as doenças profissionais e/ou ocupacionais equiparam-se a acidentes de trabalho. \cite{TST}. 
\end{citacao}

Há muito tempo já existiam relatos de doenças relacionadas às atividades laborais, pelos Egípcios, Babilônicos e greco-romanos. Há relatos de registros Egípcios relacionando acidentes de trabalho e os riscos inerentes às atividades datadas de 2360 a.C, primeiramente, relacionado a uma premissa mágico-religiosa e, posteriormente, em uma perspectiva naturalista  \cite{Mattos}.

Pode-se ver que a preocupação com a segurança é algo que vem a séculos preocupando o ser humano, e não por menos, se o indivíduo depende do fruto de seu trabalho para sobreviver como um membro ativo e produtivo da sociedade então nada mais lógico do que se preservar para continuar exercendo suas atividades. A segurança pode ser definida como: 

\begin{citacao}
Segurança é o estado de baixa probabilidade de ocorrência de eventos que causam danos e perdas. Não temos a pretensão de criar a ciência da Segurança, mas propomos a sistematização coerente de conceitos para auxiliar os que almejam fazer algo em relação à segurança das pessoas, do meio ambiente ou do patrimônio. \cite{Cardella}.
\end{citacao}

Um dos primeiros trabalhos em que se mostra as doenças ocupacionais por um lado científico é descrito por  \citeonline{Mattos}, que contextualiza alguns acontecimentos relatados pelo povo Grego, sendo eles os responsáveis pela mudança do paradigma espiritualista para o naturalista. Como exemplo, Hipócrates descreveu a intoxicação saturnina, porém sem descrever o ambiente e a ocupação laboral. Plínio, o Velho (23-79 a.C.), relatou em seu trabalho, o tratado História Naturalis, o aspecto de trabalhadores expostos ao chumbo, mercúrio e poeiras, descrevendo o primeiro \gls{epi}, como sendo máscaras feitas de pano e bexigas.
Os autores \citeonline{Barsano_e_barbosa} descrevem algumas premissas das condições de trabalho de forma previnir acidentes e otimizar o nível de segurança dos trabalhadores:

\begin{citacao}
Portanto, no ambiente de trabalho necessitamos encontrar condições capazes de proporcionar o máximo de proteção e ao mesmo tempo satisfação no trabalho. E quando existe essa combinação, com toda certeza resulta num aumento significativo da produtividade, melhoria da qualidade dos serviços, redução do índice de absenteísmo e diminuição drástica das doenças e dos acidentes do trabalho. \cite{Barsano_e_barbosa}.
\end{citacao}


<h1>TEMA DE PESQUISA</h1>

Este \gls{tcc} buscou mensurar e supervisionar a exposição a ambientes insalubres conforme a \gls{nr} 15 - Atividades e Operações Insalubres \citeonline{NR15}, pois segundo \citeonline{Barsano_e_barbosa}: quando um desses fatores, ou um conjunto deles, foge ao controle, seja pelos níveis permitidos ou pelos processos que se desencadeiam, o ambiente de trabalho torna-se suscetível de desenvolver as chamadas patologias do trabalho. Estes agentes são descritos na \gls{nr} 9 - Avaliação e Controle das Exposições Ocupacionais a Agentes Físicos, Químicos e Biológicos \citeonline{NR9} em três categorias: físicos, químicos e biológicos. 

<h1>DELIMITAÇÃO DE PESQUISA</h1>


Nesta pesquisa, alguns agentes físicos foram avaliados, sendo que a \gls{nr} 9 \citeonline{NR9} descreve os agentes físicos, como: ruídos, vibrações, pressões anormais, temperaturas extremas, radiações ionizantes, radiações não ionizantes, bem como o infrassom e ultrassom.
Os agentes físicos foco deste \gls{tcc} são: ruídos de impacto, vibrações, temperaturas e radiações não ionizantes (luz), que podem ser facilmente mensurados e comparados com os valores estabelecidos na norma \gls{nr} 15 \citeonline{NR15}. Dessa forma, vislumbra-se obter um melhor controle sobre a exposição visando a prevenção de patologias, sendo os parâmetros físicos mensurados por sensores de baixa complexidade e podendo ser embarcados em dispositivo vestível de baixo custo.

<h1>PROBLEMÁTICA E PREMISSAS DE PESQUISA </h1>


De acordo com \citeonline{Lusk}: “O ruído causa vários efeitos indesejáveis à saúde dos indivíduos expostos, como zumbido, aumento da pressão arterial e da frequência cardíaca, insônia, estresse e irritabilidade”.
\par
A exposição à vibração ocupacional, gera diversos danos à saúde do trabalhador como doenças vasculares, neurológicas e musculares. \citeonline{Molica}, em entrevista ao PodPrevenir, descreve que “uma vibração de alta amplitude nas mãos por exemplo, gera uma síndrome chamada síndrome do dedo branco que afeta todo o sistema circulatório podendo até gerar amputação do membro superior”. 
\par
A exposição ao calor causa brotoejas, câimbras, exaustão e insolação. Os sintomas primeiros sintomas de que o corpo precisa ser resfriado são: dor de cabeça, fraqueza, suor excessivo, irritabilidade ou confusão mental, sede, náuseas e vômitos, conforme destaca a fabricante de \gls{epi} \citeonline{Dupont} em seu blog.
\par
\citeonline{Lorenzi} lista as doenças causadas pela má iluminação, sendo elas: irritação dos olhos, cansaço visual, distúrbios emocionais e problemas de pele.
Os ambientes de trabalho são lugares dinâmicos e muito complexos. Apenas os fatores descritos anteriormente já influenciam uma quantidade considerável de pessoas nas áreas de manufatura de produtos e beneficiamento de alimentos, saúde, escritórios e outros tipos de serviços. Sendo assim, as normas e procedimentos atuais realmente são suficientes para garantir que todos esses colaboradores estão protegidos dessas enfermidades?
\par
A mensuração constante, controle automático e supervisão desses parâmetros, mesmo que não seja feita com instrumentos precisos desenvolvidos para tal, podem indicar a magnitude e dar uma ideia de pontos a serem observados com mais cuidado, evitando assim falhas de omissão que são definidas por \citeonline{Cardella} como: falha de omissão, quando não executa ou executa apenas parcialmente uma intervenção, tarefa, função ou passo.

<h1>OBJETIVOS DA PESQUISA</h1>

<h2>Objetivo Geral</h2>


O objetivo principal deste TCC foi desenvolver um sistema embarcado composto de um dispositivo vestível com sensores de temperatura, luminosidade, vibração e ruído de impacto com capacidade de transferência de dados para um servidor \gls{web} de supervisão e monitoramento. 

<h2>Objetivos Específicos</h2>


<ul>
    <li> Selecionar os sensores;
    <li>	Integrar os sensores ao sistema microcontrolador;
    <li>	Desenvolver o circuito embarcado;
    <li>	Desenvolver o \textit{firmware};
    <li>	Desenvolver o servidor;
    <li>	Desenvolver a aplicação \gls{web};
    <li>	Integrar o dispositivo e a aplicação ao servidor.
</ul>

<h1>JUSTIFICATIVA</h1>


Um acidente não ocorre por uma única causa, mas sim por uma série de fatores contribuintes.

\begin{citacao}
A abordagem holística da segurança do trabalho é outra forma em que visualizamos os acidentes. Nela não afirmamos que o acidente teve uma única e exclusiva origem, mas foi gerado pela interação simultânea de diversos fatores (físicos, biológicos, psicológicos, sociais e culturais), e que um desencadeou o outro, gerando um acidente. Logo não há uma causa única dos acidentes, e sim várias. \cite{Barsano_e_barbosa} 
\end{citacao}

\citeonline{Erros_humanos} destaca que as capacidades humanas se deterioram com a complacência e que cada vez mais a ciência e a tecnologia trabalham para que os erros diminuam e na impossibilidade de eliminá-los, que seus efeitos não causem um acidente grave ou fatal.
A aviação trabalha a partir do fato de que seres humanos são falhos e por isso dispõem de diversas camadas de proteção contra acidentes. \citeonline{Fatores_humanos} relata que por vezes a mente pode criar uma falsa memória baseada em experiências anteriores, ou seja, um procedimento de segurança pode ser esquecido, pois o cérebro pode ter injetado a memória de ter executado aquela tarefa a partir da memória de centenas de execuções posteriores.
Dado os altos números de acidentes destacado no início deste trabalho e as limitações do ser humano, surge a percepção inspirada na aviação da necessidade de mais camadas de segurança para combater os altos números supra citados, uma camada com base na tecnologia que reduza os erros decorrentes do homem, que seja capaz de coletar dados, tome ações de controle e supervisione o dia a dia do trabalhador. 

\begin{citacao}
A prevenção de acidentes requer o estudo de fenômenos que causam danos e perdas às pessoas, ao patrimônio e ao meio ambiente. Se quisermos criar a ciência da prevenção de acidentes, devemos escolher esses fenômenos por objeto. \cite{Cardella}.
\end{citacao}

<h1>PROCEDIMENTOS METODOLÓGICOS</h1>


O trabalho iniciou-se com a consulta à \gls{nr} 9 \citeonline{NR9} sobre os limites de exposição aos agentes físicos. A próxima etapa foi a escolha dos sensores com base nos requisitos e facilidade de implementação.
Dando início ao processo de prototipagem do dispositivo de forma que fosse vestível e tivesse embarcado cada um dos sensores, realizou-se o desenvolvimento do firmware para a correta leitura das grandezas medidas, transmissão destes dados ao servidor e emissão de alertas ao usuário.
O próximo passo foi o desenvolvimento do servidor que recebe os dados e registra os avisos de forma que seja visível aos gestores, seguido dos testes de hardware, firmware e software. 
Por fim, obtiveram-se os resultados para a última etapa, na qual fez-se a análise do sistema para se concluir se o dispositivo obteve êxito e também o registro dos principais pontos de aprendizado.


<h1>ESTRUTURA</h1>


Este trabalho é composto por cinco capítulos: o primeiro se constitui de uma introdução do tema, sua delimitação, as problemáticas, objetivos, justificativa e descrição dos procedimentos metodológicos adotados. O segundo capítulo contém uma revisão bibliográfica. No terceiro são apresentados os materiais e métodos aplicados para o desenvolvimento do trabalho. No quarto são apresentados e discutidos os resultados da implementação. O último se destina às considerações finais sobre o trabalho. 



<h1>FUNDAMENTAÇÃO TEÓRICA</h1>


Neste capitulo é apresentada a fundamentação teórica que norteou a pesquisa do sistema EPI inteligente com transferência de dados de temperatura, vibração e ruído sonoro via WiFi.
\section{SENSORES}
\label{sec:sensores}

Sensores, no contexto da engenharia elétrica, são dispositivos que realizam a conversão de grandezas físicas em grandezas elétricas que então podem ser interpretadas através de displays no corpo do instrumento de medida ou então enviadas a outro dispositivo para ser processada. Segundo  \citeonline{Giancarlo}, utilizam-se os efeitos físicos (força eletromagnética, força eletrostática, efeito Joule, efeito termoelétrico, entre outros) para fornecer esses dados aos instrumentos através de grandezas elétricas. 

\subsection{Detecção de luz}
\label{subsec:detecaoDeLuz}


Para detectar o nível de luminosidade do local um dispositivo fotocondutor chamado de \textit{Light Dependent Resistor} (\gls{ldr}) pode ser usado, conforme exemplificado na \autoref{fig:LDR}. Este, quando exposto à luz, possui uma baixa resistência e comportamento contrário quando longe de quaisquer fontes luminosas.

Pode-se detectar essas variações de sua resistência indiretamente através do uso de um divisor resistivo, em que o \gls{ldr} será inserido em série com um resistor com valor conhecido. Segundo \citeonline{Kilari}, o desempenho desta solução é semelhante a Luxímetros comerciais tendo um desempenho muito próximo de um valor linear.

Esse comportamento é explicado por \citeonline{Mattosv1}, no qual a exposição à luz resulta em elétron livre que é deslocado da banda de valência para a de condução assim quando exposto à um potencial elétrico ocasiona o movimento de elétrons e lacunas.

\begin{figure}[!htb]
    \centering
    \caption{Exemplo de resistor \gls{ldr}.}
    \includegraphics[width=0.45\textwidth]{./dados/figuras/nLDR2.jpg}
    \label{fig:LDR}
    \fonte{Autoria própria (2021).}
\end{figure}
\newpage

Outra forma de mensurar a luz é descrita por \citeonline{Guadagnini}, que utiliza a diferença de resistividade de um diodo em polarização reversa, conforme apresentado na \autoref{fig:fotodiodo}. Quando o dispositivo é submetido a fótons de luz apresenta um aumento dos elétrons na camada de condução, sendo que o  campo elétrico gerado por estes fótons possui o campo elétrico da polarização reversa. Portanto, ambos efeitos se intensificam e surge uma corrente fotoelétrica proporcional à intensidade dos fótons recebidos. 

\begin{figure}[!htb]
    \centering
    \caption{Funcionamento de um fotodiodo em polarização reversa.}
    \includegraphics[width=0.5\textwidth]{dados/figuras/funcionamentoFotoDiodoEmPolarizacaoReversa.jpg}
    \label{fig:fotodiodo}
    \fonte{\citeonline{Guadagnini}.}
\end{figure}

<h2>Sensor de vibração</h2>



Segundo \citeonline{Tomazini}, sensores de aceleração fornecem um sinal elétrico proporcional a aceleração do sistema. Esse sensor é considerado um transdutor de energia mecânica em tensão analógica podendo ser usado como instrumento para medir velocidade, choque e vibração. Segundo os autores, os acelerômetros na realidade são medidores de inércia de um corpo de testes, que no caso de um acelerômetro piezoelétrico, gera uma deformação sobre uma lâmina de quartzo, conforme mostra a \autoref{fig:acelPiezo}. Como o quartzo produz um sinal elétrico proporcional a sua deformação é possível converter inércia em aceleração pelo próprio dispositivo através da lei de Hooke.

\begin{figure}[!htb]
    \centering
    \caption{Visão construtiva de um acelerômetro piezoelétrico.}
    \includegraphics[width=0.4\textwidth]{./dados/acelerometroQuartzo.png}
    \label{fig:acelPiezo}
    \fonte{\citeonline{Tomazini}.}
\end{figure}


Os danos causados pela vibração dependem da média da aceleração a qual a região está exposta durante um dia de trabalho. Os efeitos de vibrações no corpo humano variam de acordo com cada faixa de frequência sendo:

\begin{citacao}
Na atividade muscular, na faixa de 1 Hz a 30 Hz, as pessoas apresentam dificuldades de manter a postura, além de apresentar reflexos lentos; no sistema cardiovascular, a frequências inferiores a 20 Hz, observa-se aumento da frequência cardíaca; aparentemente existem alterações nas condições de ventilação pulmonar e na taxa respiratória com vibrações na ordem de 4,9 $m/s^2$ na faixa de 1 Hz a 10 Hz; na faixa de frequência de 0,1 Hz a 0,7 Hz, diversas pessoas apresentam enjoo, náuseas, perda de peso, redução da acuidade visual, insônia e distúrbios do labirinto \cite{Mattosv2}
\end{citacao}

O acelerômetro capacitivo, segundo \citeonline{Mattosv1}, tem uma vantagem sobre os acelerômetros piezoresistivos por permitirem medir inclinações de objetos em relação a sua superfície. Seu funcionamento é descrito pelos autores como dois capacitores diferenciais com uma placa central comum, representada na \autoref{fig:fac} pela cor azul. A placa comum é presa a uma viga móvel que se encontra sustentada por outras duas paredes flexíveis representadas em amarelo. Quando o dispositivo é submetido a aceleração a viga se desloca movimentando consigo a placa comum e assim provocando uma diferença de capacitância.


\begin{figure}[H]
    \centering
    \caption{Funcionamento do acelerômetro capacitivo.}
    \includegraphics[width=0.4\textwidth]{./dados/figuras/fac}
    \label{fig:fac}
    \fonte{Adaptado de \citeonline{Mattosv1}.}
\end{figure}


No caso da \autoref{fig:pbro}, o uso de acelerômetro capacitivo permite detectar o ângulo do braço do usuário e assim distinguir movimentos de vibrações, uma vez que as vibrações do uso de ferramentas oscilaram em torno do ângulo de trabalho do operador.

\begin{figure}[H]
    \centering
    \caption{Posição do braço em relação a origem.}
    \includegraphics[width=0.35\textwidth]{./dados/figuras/pbro}
    \label{fig:pbro}
    \fonte{Adaptado de \citeonline{Nise}.}
\end{figure}


<h2>Sensor de som</h2>


Segundo \citeonline{Mattosv1}, o som pode ser definido como qualquer oscilação de pressão, seja no ar, água ou qualquer outro meio físico. Ou formalmente, é a diferença entre a pressão instantânea e a pressão ambiente média para certo ponto, definida conforme a Equação (1):

\begin{equation}
    L_p = 20*log(\frac{p}{p_{ref}})
    \label{eq:pressaoSonora}
\end{equation}

\citeonline{SANTINI}, possuem uma definição para pressão sonora levando em consideração um intervalo de tempo, o valor \gls{rms} do valor da pressão instantânea e o mínimo audível pelo ser humano, conforme a Equação (2),

\begin{equation}
    L_{eq,T}=10*log(\frac{1}{T}\int_{0}^{T}\frac{p(t)^2}{p_{o}^2}dt)
    \label{eq:pressaoSonoraRMS}
\end{equation}

em que:
<ul>
    <li> \textit{T} é o período de tempo;
    <li> \textit{p}(\textit{t}) é o valor instantâneo da pressão sonora;
    <li> \textit{p\textsubscript{o}} é o valor correspondente ao mínimo acústico audível pelo ser humano. 
</ul>

Para medir essas variações de pressão no ar, o microfone omnidirecional condensador (ou capacitivo) pode ser utilizado por possuir baixa distorção e alta estabilidade. Seu funcionamento é descrito pelo autor citado anteriormente e consiste de um diafragma montado a uma pequena distância de um prato e ambos formam um capacitor, quando o diafragma é submetido a algum diferencial de pressão ele se move alterando a distância de si mesmo e o prato gerando um diferencial de reatância.

\begin{citacao}
Os principais efeitos no corpo humano de ruídos quando ultrapassam limites estabelecidos em norma são: “mascaramento da voz humana, surdez temporária, surdez permanente, irregularidade do sono e aumento da pressão arterial” \cite{Mattosv1}.
\end{citacao}

\subsection{Sensor de Temperatura}
\label{subsec: sensorDeTemperatura}

Ao unir dois diferentes metais e os manter a uma temperatura diferente, de acordo com \citeonline{Brito}, o efeito termoelétrico é produzido. Este efeito foi descoberto em 1821 por Seebeck e até hoje é muito utilizado na indústria para medir temperatura, especificamente no componente conhecido como termopar.

A matéria muda algumas de suas características quando submetida a diferentes variações de temperatura, o que não poderia ser diferente para os semicondutores tais como diodos e transistores. Devido à miniaturização dos semicondutores, tornou-se fácil o seu uso em dispositivos vestíveis. De acordo com \citeonline{Mattosv1}, que descrevem como se pode utilizar transistores para medir temperatura, os quais são isolantes a baixas temperaturas, porém sua condutividade aumenta junto com o fornecimento de calor a ele. Portanto, teoricamente se pode utilizar um diodo para tal, mas a variação de condutividade não é linear a variação de temperatura, além de que a corrente que passa por ele também é dependente da temperatura. Outra possibilidade seria utilizar um transistor e utilizar a dependência com a temperatura da tensão base-emissor, porém para isso é necessária uma fonte de corrente contínua.

O circuito apresentado na \autoref{fig:ctc} é popularmente conhecido como conversor de temperatura-corrente e é amplamente utilizado nos circuitos integrados. Os transistores $Q_3$ e $Q_4$ são idênticos resultando em correntes de mesma magnitude passando por eles. O transistor $Q_2$ é um arranjo de 8 transistores em paralelo sendo cada um deles idênticos a $Q_1$, de forma que a corrente no emissor de um transistor de $Q_2$ é $1/8$ da corrente de $Q_1$.

\begin{figure}[H]
    \centering
    \caption{Conversor de temperatura-corrente.}
    \includegraphics[width=0.5\textwidth]{./dados/figuras/ctc}
    \label{fig:ctc}
    \fonte{\citeonline{Mattosv1}.}
\end{figure}


<h1>LIMITES DE ESPOSIÇÃO ESTABELECIDOS EM NORMA</h1>


O ambiente de trabalho possui diversos fatores que interferem na saúde humana. Para que estes fatores não gerem danos, a \gls{nr} 9 \citeonline{NR9} estabeleceu limites de tolerância para os diversos tipos de agentes físicos. Nas próximas seções são apresentados os riscos analisados pelo EPI Inteligente.

<h2>RUÍDO</h2>

Por meio da \gls{nho} 01 - Avaliação da Exposição Ocupacional ao Ruído \citeonline{NHO01}, a \gls{nr} 9 estabeleceu limites de tolerância relacionados com a natureza e o tempo de exposição, apresentados na Tabela 1.

\input{./dados/tabelas/limtol}


Entretanto, outros limites devem ser aplicados caso o ruído seja do tipo de impacto, definido pela \gls{nr} 9 \citeonline{NR9} como: “Entende-se por ruído de impacto aquele que apresenta picos de energia acústica de duração inferior a 1 (um) segundo, a intervalos superiores a 1 (um) segundo”. Para este caso, deve-se usar a \autoref{tab:limtolimpac}, a qual apresenta a quantidade de impactos admissíveis em uma jornada de trabalho por dB.

\input{./dados/tabelas/limtolimpac}

\newpage

<h2>VIBRAÇÃO</h2>

A \gls{nr} 9 \citeonline{NR9} estabelece que o limite máximo de exposição diária à vibração em mãos e braços é medido em \gls{aren} e deve ser no máximo 5 $m/s^2$. Cabe a \gls{fundacentro} definir como são calculados esses limites, sendo a AREN calculada por:

\begin{equation}
    AREN = ARE\sqrt{\frac{T}{T_0}}
\end{equation}

em que:
<ul>
    <li> \gls{are} é a aceleração resultante de exposição;
    <li> \textit{T} é o tempo de duração da jornada de trabalho diária;
    <li> \textit{T\textsubscript0} é uma constante definida como igual a 8 horas.
</ul>

A aceleração resultante é calculada utilizando-se outras duas medidas, sendo a primeira a \gls{amr} que consiste de uma média aritmética das acelerações em cada componente do sistema tridimensional. A medida necessária é a \gls{arep} que pode ser obtida pela média aritmética da aceleração média resultante cada vez em que ocorre uma aceleração no qual é observada a vibração.
Para calcular a aceleração resultante de exposição a seguinte formula deve ser usada,

\begin{equation}
    ARE = \sqrt{\frac{1}{T}\sum_{i=1}^{m} n_iAREP_i^2T_i}
\end{equation}

sendo que:

<ul>
    <li> \gls{arep}\textsubscript{i} é a aceleração resultante de exposição parcial;
    <li> \textit{T\textsubscript{i}} é o tempo de duração da componente de exposição “i”;
    <li> \textit{n} é o número de repetições ao longo da jornada de trabalho;
    <li> \textit{m} representa \textit{i}, \textit{j} e \textit{k} que correspondem aos eixos \textit{x}, \textit{y} e \textit{z}, respectivamente.
</ul>

<h2>TEMPERATURA</h2>


A \gls{nr} 9 \citeonline{NR9} estabelece limites à exposição ao calor. Segundo a mesma, o limite de temperatura varia conforme a atividade exercida, pois cada atividade possui uma taxa metabólica. Como a tabela é demasiadamente grande para este trabalho, apenas são consideradas as seguintes atividades: trabalho sentado leve com as mãos, trabalho sentado pesado com dois braços e trabalho em pé com movimento sem carga a 4 km/h, as quais têm seus níveis de taxa metabólica apresentados na \autoref{tab:taxametabolica}.

\input{./dados/tabelas/taxametabolica}

Dada a taxa metabólica das atividades selecionadas a  \autoref{tab:limcalor} relaciona a taxa metabólica M com a \gls{ibutg}. Neste \gls{tcc}, o \gls{ibutg} foi considerado apenas como temperatura medida pelo sensor de calor.
\newline

\input{./dados/tabelas/limcalor}

<h2>LUMINOSIDADE</h2>


A \citeonline{ABNT} estabelece os parâmetros de iluminação que um ambiente deve obedecer. Neste trabalho, a iluminância do ambiente foi medida através de um \gls{ldr}. Apesar de ambiente ter um valor mínimo estabelecido na norma, nesta pesquisa foi arbitrado apenas um local de usinagem onde a iluminância média mínima deve ser de 300 lux.

<h1>MATERIAIS E MÉTODOS</h1>


O dispositivo, ou EPI inteligente, deverá ser vestido no pulso do usuário de maneira que se mantenha firme e não prejudique sua movimentação. A \autoref{fig:diagrama} apresenta um diagrama de comunicação do sistema. Neste trabalho não é apresentado um esforço no desenvolvimento em sistemas de armazenamento de energia, gestão de bateria e controle de tensão. Portanto, ele deve conter um carregador portátil genérico com tensão de saída de 5 V para alimentar a placa de prototipagem e este armazenador de energia poderá ser mantido no bolso do usuário alimentando o sistema através de um cabo. A placa de prototipagem possui uma saída de 3,3 V que deve ser utilizada para alimentar os seguintes sensores:

<ul>
    <li> Sensor de luminosidade conectado ao microcontrolador via sinal analógico;
    <li> Sensor de som conectado ao microcontrolador via pinos de \gls{gpio};
    <li> Sensor de vibração que deve se comunicar com o microcontrolador via protocolo de comunicação \textit{Inter-Integrated Circuit} (\gls{i2c}).
</ul>

Os sensores são calibrados de forma a identificar os agentes físicos os quais devem ser capazes de medir. O microcontrolador lê os dados fornecidos pelos sensores e verifica se algum limite estabelecido na \gls{nr} 9 \citeonline{NR9} foi ultrapassado, levando em conta o contexto do usuário. Caso ultrapasse o limite, o microcontrolador emitirá um sinal luminoso através de um \gls{led} vermelho instalado na carcaça do dispositivo. Um segundo \gls{led} amarelo foi instalado para sinalizar que seu usuário deve se deslocar até seus gestores. O microcontrolador também envia todos os alertas ao banco de dados via internet.

\begin{figure}[H]
    \centering
    \caption{Diagrama de comunicação do sistema.}
    \includegraphics[width=1\textwidth]{./dados/figuras/Diagrama_de_blocos}
    \fonte{Autoria própria (2021).}
    \label{fig:diagrama}
\end{figure}

<h1>SERVIDOR</h1>

O servidor tem a função de ler todos os dados enviados pelo microcontrolador ao banco de dados e ser capaz de disponibilizá-los através de uma página \gls{web}. Também fornece todos os recursos da aplicação \gls{web}.

<h1>APLICAÇÃO WEB</h1>
 

Por meio da aplicação \gls{web} os gestores devem ser capazes de visualizar todos os dados dos sensores do dispositivo. A aplicação fornece estes dados de forma amigável, além de sinalizar aos mesmos quando um limite estabelecido em norma foi atingido para que possam tomar alguma medida corretiva. As medidas corretivas possíveis são:


<ul>
    <li> Enviar um sinal para o usuário para que o mesmo vá até seu supervisor;
    <li> Dirigir-se até o local para averiguar os alertas;
    <li> Desenvolver novas formas de minimizar os efeitos dos agentes físicos ou realizar a adequação dos equipamentos de proteção passivos (\gls{epi} tradicionais).
    
</ul>

<h1>PLACA DE PROTOTIPAGEM</h1>


A plataforma escolhida para este trabalho foi NodeMCU, exibida na \autoref{fig:nodemcu}, que se trata de uma placa de desenvolvimento de firmware aberto desenvolvida com base no módulo ESP-12E, que por sua vez utiliza um processador Tensilica 32-bit RISC CPU Xtensa LX106. As características relevantes para este trabalho são:

<ul>
    <li> Processador de 80 até 160 MHz com ponto flutuante;
    <li> Memória \gls{ram} de 128 KB;
    <li> \gls{eeprom} de 4 MB;
    <li> 1 modulo \gls{i2c};
    <li> 1 canal \gls{adc} de 10 bits;
    <li> Wi-Fi integrado;
    <li> Antena embutida em sua placa.
</ul>

Os principais motivos para seleção desta placa de prototipagem foram seu Wi-Fi integrado, a biblioteca desenvolvida pelo \citeonline{mobitz} para se comunicar com os bancos de dados do Firestore (descrito posteriormente) e sua grande comunidade de desenvolvimento.

\begin{figure}[H]
    \centering
    \caption{Placa de prototipagem NodeMCU.}
    \includegraphics[width=0.7\textwidth]{./dados/figuras/NodeMCU.png}
    \label{fig:nodemcu}
    \fonte{Autoria própria (2021).}
\end{figure}

<h2>SENSOR DE LUZ</h2>

Para detectar as variações de luminosidade foi utilizado um resistor \gls{ldr} montado na placa de circuito impresso em série com um resistor, de forma a obter um divisor de tensão conforme \autoref{fig:divres}. Suas características segundo o fabricante são:

<ul>
    <li> Resistência mínima quando submetido a luz de 10 k$\Omega$;
    <li> Resistência máxima no escuro de 0,5 M$\Omega$.
</ul>

\begin{figure}[H]
    \centering
    \caption{Divisor resistivo para o \gls{ldr}.}
    \includegraphics[width=0.4\textwidth]{./dados/figuras/divisorResistivo}
    \label{fig:divres}
    \fonte{Autoria própria (2021).}
\end{figure}


<h2>ACELERÔMETRO E SENSOR DE TEMPERATURA</h2>

Para medir vibrações foi selecionado o módulo DOF MPU-6050 (\autoref{fig:modacelerometro}), desenvolvido e fabricado pela \citeonline{Acelerometro}. O módulo possui acelerômetro, giroscópio e sensor de temperatura integrado ao mesmo componente. As suas características relevantes a este \gls{tcc} são:

<ul>
    <li> Tensão de operação: 2,375 V – 3,46 V;
    <li> Interfaces de comunicação: \gls{i2c};
    <li> \gls{adc} de 16 bits;
    <li> Sensibilidade do acelerômetro configurável entre: ±2 g, ±4 g, ±8 g e ±16 g;
    <li> Sensor de temperatura linear na faixa de: -40ºC até 85ºC;
    <li> \textit{Offset} de temperatura: 35ºC;
    <li> Resistor de \textit{pull-up} para o protocolo \gls{i2c} integrado.
</ul>

\begin{figure}[H]
    \centering
    \caption{Módulo acelerômetro DOF MPU-6050.}
    \includegraphics[width=0.5\textwidth]{./dados/figuras/Acelerômetro.png}
    \label{fig:modacelerometro}
    \fonte{Autoria própria (2021).}
\end{figure}

<h2>MÓDULO DE SOM</h2>


O módulo de som escolhido, \autoref{fig:modsom}, envia o sinal captado por seu microfone capacitivo até o comparador LM393. Assim, quando o som ambiente está abaixo do limite definido sua saída se mantém com o nível lógico alto e quando ultrapassado a saída vai para o nível lógico baixo. Suas características de acordo com o fornecedor são:

<ul>
    <li> Tensão de operação: 3,3 V – 5 V;
    <li> Sensibilidade ajustável através de um potenciômetro montado sobre o próprio módulo.
</ul>

\begin{figure}[H]
    \centering
    \caption{Módulo de som com comparador LM393}
    \includegraphics[width=0.45\textwidth]{./dados/figuras/Modulo de som.png}
    \label{fig:modsom}
    \fonte{Autoria própria (2021).}
\end{figure}

<h2>CARREGADOR PORTÁTIL</h2>

Para fornecer energia ao dispositivo foi utilizado um carregador portátil genérico. Foi escolhido por fornecer uma tensão de 5 V estável com um sistema de gerenciamento de bateria e regulador de tensão já inclusos.

<h1>PROTOCOLOS DE COMUNICAÇÃO</h1>

<h2>I2C</h2>

O protocolo \gls{i2c} foi desenvolvido pela Philips em 1982. De acordo com \citeonline{Trivedi}, tem uma interface de dois fios sendo um protocolo \textit{half-duplex} de arquitetura mestre-escravo. Seus dois fios são o \gls{sda} e o \gls{scl} sendo este gerado pelo mestre, e seu \textit{frame} é representado na \autoref{fig:i2c}. A topologia do protocolo é do tipo barramento, como apresentado na \autoref{fig:topologiai2c}.

\begin{figure}[H]
    \centering
    \caption{Quadro \gls{i2c}.}
    \includegraphics[width=0.7\textwidth]{./dados/figuras/i2c}
    \label{fig:i2c}
    \fonte{Adaptado de \citeonline{Philips}.}
\end{figure}

\begin{citacao}
Inicialmente \gls{scl} e \gls{sda} estão em nível lógico baixo. Primeiramente o \gls{sda} vai para o nível baixo posteriormente o \gls{scl} faz o mesmo e isto é entendido pelo bit de início. Portanto, o mestre gera o clock no pino \gls{scl} e sincroniza este sinal com a transferência de bits que ocorre pelo \gls{sda}. \cite{Trivedi}.
\end{citacao}

\begin{figure}[H]
    \centering
    \caption{Topologia do protocolo \gls{i2c}.}
    \includegraphics[width=0.7\textwidth]{./dados/figuras/topologiai2c}
    \label{fig:topologiai2c}
    \fonte{Adaptado de \citeonline{Philips}.}
\end{figure}

<h2>FIRESTORE</h2>

O Firestore é um banco de dados com uma arquitetura de dados própria que sua desenvolvedora chama de orientado a documentos. Esta arquitetura de banco de dados se assemelha em muito ao conceito de linguagens de programação orientadas a objetos, em que cada documento possui uma chave-valor. Seu funcionamento, segundo a \citeonline{Firestore}, é feito com base em documentos e coleções, em que o segundo possui um conjunto de vários documentos que por fim possui um conjunto de dados.

<h2>DOCUMENTOS</h2>


De acordo com a \citeonline{Firestore}, a unidade de armazenamento é o documento, limitado a 1MB, que contém campos e cada campo possui um nome e um valor. Além disso, cada documento também tem seu próprio nome. Quando um campo possui um objeto complexo e aninhados ele passa a se chamar de mapa, como na \autoref{fig:documentos2}.

\begin{figure}[H]
    \centering
    \caption{Documentos com valores aninhados.}
    \includegraphics[width=0.3\textwidth]{./dados/figuras/documentos2}
    \label{fig:documentos2}
    \fonte{\citeonline{Firestore}.}
\end{figure}

\newpage

<h2>COLEÇÕES</h2>

Coleções são recipientes para documentos, em que cada coleção também recebe um nome. Os documentos dentro de uma coleção não precisam necessariamente possuir os mesmos campos, porém é recomendável que tenham para que seja mais fácil de realizar consultas, como apresentado na \autoref{fig:colecoes}.

\begin{figure}[H]
    \centering
    \caption{Coleções com documentos.}
    \includegraphics[width=0.3\textwidth]{./dados/figuras/colecoes}
    \label{fig:colecoes}
    \fonte{\citeonline{Firestore}.}
\end{figure}

<h1>NODE.JS</h1>


O Node.js é um ambiente de execução Javascript assíncrono orientado a eventos que permite que a execução do \textit{script} continue sem ter que esperar alguma operação que não seja de Javascript ser executada. Segundo a \citeonline{Express/nodeJS}, foi lançado em 2009 e é usado fora do contexto de um navegador, podendo ser utilizado diretamente no servidor. O Javascript é uma linguagem de \textit{front-end}, ou seja, foi criado para ser utilizado somente dentro de navegadores, fazendo com que toda a programação do servidor (\textit{back-end}) tivesse que ser escrita em outras linguagens, como o \gls{php}. O Node.JS além de permitir um excelente desempenho da aplicação, permite utilizar a mesma linguagem de programação tanto para a parte de \textit{front-end} (parte visível ao usuário compilada pelo seu navegador) como a de \textit{back-end} (parte onde é feita o processamento dos recursos da página). Por suas vantagens, além de sua enorme comunidade e também por ter uma forma de conexão muito bem documentada para a conexão com o banco de dados, esta tecnologia foi escolhida para o desenvolvimento da aplicação \gls{web}. 


<h1>CIRCUITO ESQUEMÁTICO</h1>



Com base nas informações fornecidas pelos fabricantes dos componentes foi desenvolvido o esquemático elétrico da aplicação. Tal circuito esquemático foi projetado com a ferramenta Eagle versão 9.6.1, sendo representado na \autoref{fig:esquematico}. Pode-se observar que não foi previsto resistores de \textit{pull-up} no barramento \gls{i2c}. Isto se deve ao fato do acelerômetro já os possuir em seu circuito impresso. 

\begin{figure}[H]
    \centering
    \caption{Circuito esquemático do sistema proposto.}
    \includegraphics[width=0.7\textwidth]{./dados/figuras/esquematico}
    \label{fig:esquematico}
    \fonte{Autoria própria (2021).}
\end{figure}

\par
O \gls{ldr} é conectado ao microcontrolador em uma associação em série com um resistor de resistência fixa conhecida. O objetivo desta topologia é gerar um ponto de tensão variável e assim medir indiretamente o diferencial de resistência do \gls{ldr} através de um ponto central. Esta medição por parte do microcontrolador não influencia a dinâmica da associação, devido ao fato de sua leitura ser feita por meio de uma entrada de alta impedância.
\par
Para dimensionar o resistor R1 algumas considerações foram feitas: devido ser desejável aproveitar o máximo a escala do \gls{adc} a queda de tensão no \gls{ldr} deve ser de 0,3 V quando estiver em sua resistência mínima (10 k$\Omega$). Através da lei de Ohm, obtem-se que a corrente na associação deve ser de 0,003 mA.  Aplicando-se a \gls{lkv} no circuito apresentado na \autoref{fig:divres}, obtém-se:

\begin{equation}
    V_{R1} = V_i - V_{\gls{ldr}}
\end{equation}
\newline
<ul>
    <li> $V_{R1}$ é a queda de tensão no resistor R1;
    <li> $V_i$ é a tensão fornecida pelo regulador de tensão da placa de prototipagem;
    <li> $V_{\gls{ldr}}$ é a queda de tensão no \gls{ldr}.
</ul>

Dada a tensão de 3,3 V fornecida pela NodeMCU, foi calculado que $V_{R1}$ deve ser de 3 V, e aplicando-se novamente a lei de Ohm, encontra-se que R1 deve ser igual a 100 k$\Omega$. 

<h1>PLACA DE CIRCUITO IMPRESSO</h1>


Uma vez definido o circuito esquemático foi possível desenvolver a placa de circuito impresso que se encontra na \autoref{fig:PCB}. Para que o hardware fique preso no pulso do operador ou operadora, a placa foi projetada com a finalidade de poupar o máximo de espaço possível. Por este motivo o NodeMCU, o maior componente, foi posicionado na parte superior do circuito, juntamente com os \gls{led}s de sinalização e o \gls{ldr}, sendo que os dois últimos necessitam estar nesta posição para serem visualizados e receber luz, respectivamente. Os demais componentes foram acondicionados na parte inferior da placa a fim de poupar espaço.

\begin{figure}[H]
    \centering
    \caption{Placa de circuito impresso.}
    \includegraphics[width=0.6\textwidth]{./dados/figuras/PCB}
    \label{fig:PCB}
    \fonte{Autoria própria (2021).}
\end{figure}

Este layout foi impresso em escala em papel fotográfico em uma impressora a laser. A parte inferior foi espelhada para que as vias coincidam com a parte superior e pequenas falhas foram corrigidas utilizando marcador permanente. A transferência do layout para a placa de fenolite se deu pelo método de transferência térmica. Este processo foi repetido diversas vezes até as vias da parte superior coincidirem com a inferior. Concluída a transferência, a placa foi submetida a um banho de percloreto de ferro para que todo cobre desnecessário fosse removido. Por fim, para proteger as trilhas, a \gls{pci} foi submetida a um banho de estanho, sendo que suas vias foram perfuradas e seus componentes foram inseridos. A \autoref{fig:fotoPlacaMontadaSuperior} e a \autoref{fig:fotoPlacaMontadaVerso} mostram o resultado final após o processo descrito anteriormente.

\begin{figure}[H]
    \centering
        \includegraphics[width=0.62\textwidth]{dados/figuras/fotoPlacaMontadaSuperior.jpg}
        \caption{Vista superior da placa.}
        \label{fig:fotoPlacaMontadaSuperior}
\end{figure}
\begin{figure}[H]
    \centering
        \includegraphics[width=0.62\textwidth]{dados/figuras/fotoPlacaMontadaVerso.jpg}
        \caption{Vista inferior da placa.}
        \label{fig:fotoPlacaMontadaVerso}
\end{figure}
        


<h1>MONTAGEM FÍSICA</h1>

Para acomodar todo o circuito foi selecionada uma caixa genérica de plástico. A fixação da placa em seu interior se deu por meio de pressão mecânica. Na sua tampa foram abertos três furos para fixação do \gls{led} amarelo, do \gls{led} vermelho e do \gls{ldr}. Os furos foram abertos com uma micro retífica e os componentes presos por pressão mecânica aos furos. Uma abertura lateral foi cortada para a passagem do cabo de alimentação e uma etiqueta adesiva foi impressa, indicando a função de cada \gls{led}, conforme \autoref{fig:epiinteligente}.

\begin{figure}[H]
    \centering
    \caption{Foto do protótipo EPI Inteligente.}
    \includegraphics[width=0.6\textwidth]{dados/figuras/tccCaixa.jpg}
    \label{fig:epiinteligente}
    \fonte{Autoria própria (2021).}
\end{figure}



<h1>INTERFACE DA PÁGINA WEB</h1>



A interface gráfica, \autoref{fig:interface}, foi desenvolvida com quatro ícones representando cada um dos agentes físicos estudados neste trabalho. A coloração varia entre verde, amarelo e vermelho, conforme os mesmos chegam próximo aos seus limites, assim fornecendo ao gestor de forma rápida e intuitiva a real situação no local de trabalho com uma interface simples e pouco poluída. 
Para chamar o usuário do EPI inteligente, foi incluído um botão com o texto: "Chamar operador" \, e o ultimo botão na interface serve para limpar todos os alarmes manualmente.  


\begin{figure}[H]
    \centering
    \caption{Interface gráfica.}
    \includegraphics[width=0.6\textwidth]{./dados/figuras/Interface}
    \label{fig:interface}
    \fonte{Autoria própria (2021).}
\end{figure}


<h1>BANCO DE DADOS</h1>

A arquitetura do banco de dados foi desenvolvida para permitir a separação dos dados por usuário. Neste caso, foi criada uma coleção chamada usuário A, a qual seu nome poderia ser o próprio nome da pessoa. Para esta coleção foram criados dois documentos que são os limites e os limites alerta. Os documentos são idênticos e contêm um mapa constituídos pelos seguintes campos de variáveis do tipo booleanas: Luminosidade, Ruído, Temperatura e Vibração, conforme \autoref{fig:dataBase}. Estes campos representam o nível de alerta que será exibido na interface gráfica, conforme as seguintes regras:

<ul>
    <li> Caso os mapas de ambos documentos possuírem valores falsos, não há perigo físico e a representação na interface gráfica será verde;
    <li> Caso algum campo no mapa dos limites atenção for verdadeiro e este mesmo campo for falso, os agentes físicos estão na iminência de prejudicar o usuário e sua representação será amarela;
    <li> Analogamente, qualquer caso diferente dos descritos anteriormente será um caso de perigo e a representação será vermelha.
</ul>  
  
 \begin{figure}[H]
    \centering
    \caption{Banco de dados Firestore.}
    \includegraphics[width=1\textwidth]{./dados/figuras/Banco_de_dados}
    \label{fig:dataBase}
    \fonte{Autoria própria (2021).}
\end{figure}

<h1>MÉDIA MOVEL</h1>

Para o tratamento do sinal de luminosidade foi utilizado o filtro digital de média móvel que, segundo \citeonline{Smith}, é o filtro ótimo para redução de ruídos aleatórios em sinais no domínio do tempo, que é o caso para da luminosidade. A média móvel tira a média de um certo número de leituras para produzir um sinal de resposta. Esta resposta é atrasada na quantidade de pontos usados para calcular a média. Segundo o autor, a média móvel é calculado pela seguinte fórmula:

\begin{equation}
    Y[i]= \frac{1}{M} \sum_{j = 0}^{M-1} x[i+j]
\end{equation}

\noindent sendo que,
\begin{itemize}
    \item \textit{M} é o número de pontos usado para calcular a média móvel.
\end{itemize}
\chapter{RESULTADOS}
 
 Neste capítulo são descritos os resultados do sistema e de que forma foram obtidos. Foi realizado um teste para cada um dos subsistemas e por fim um teste de integração, sendo que cada subsistema também foi desenvolvido sob a mesma premissa. São apresentados o \textit{back-end}, o \textit{front-end}, a avaliação do banco de dados Firebase e do protótipo de Epi Inteligente desenvolvido.
 
 <h1>BACK-END</h1>
 
 Para testes do \textit{Back-end} foi utilizado o Insomnia Designer versão 8.1.110.13, que permite gerar uma requisição por meio do protocolo \gls{http} para o servidor e analisar sua resposta sem o uso de um navegador. Essa solução é extremamente útil, pois permite que o \textit{back-end} possa ser desenvolvido e testado em um ambiente de desenvolvimento antes do \textit{front-end}. Na \autoref{fig:insomnia} é apresentado o ambiente para testes do \textit{back-end}, dividido em três colunas: a primeira corresponde ao nome da rota, a segunda o corpo da requisição e a última a resposta do servidor junto com o tempo decorrido para o processamento da requisição.
 
  \begin{figure}[H]
    \centering
    \caption{Ambiente de desenvolvimento no \textit{software} Insomnia.}
    \includegraphics[width=0.75\textwidth]{./dados/figuras/Insomnia2}
    \label{fig:insomnia}
    \fonte{Autoria própria (2021).}
    
\end{figure}

\newpage

O servidor se comportou de forma esperada, gerando as requisições de dados ao banco de dados no Firebase de forma correta e fornecendo estes dados para quem seja que o requisitou, bastando apenas receber a rota correta.

<h1>FRONT-END</h1>
 
 O \textit{front-end} se comportou de maneira esperada, requisitando os dados de maneira controlada ao servidor sem gerar nenhum tipo de sobrecarga ou gerando requisições desnecessárias, evitando assim ultrapassar o limite de leituras e escritas do plano gratuito do Firebase. Este funcionamento é comprovado pela \autoref{fig:demonstacaoAplicacaoWeb}, na qual é mostrada a aplicação em funcionamento no navegador e ao lado o banco de dados, e pode-se observar que a aplicação respondeu corretamente aos valores gravados no Firebase.
 
 
 \begin{figure}[H]
    \centering
    \caption{Aplicação \gls{web} em funcionamento.}
    \includegraphics[width=1\textwidth]{./dados/figuras/demonstacaoAplicacaoWeb}
    \label{fig:demonstacaoAplicacaoWeb}
    \fonte{Autoria própria (2021).}
\end{figure}
 

<h1>FIREBASE</h1>

Na \autoref{fig:useFirebase} é possível verificar que mesmo durante o dia de testes mais intensos de todo o sistema o número de escrita e leitura ficou dentro do limite de 50 mil operações por dia do plano gratuito. Porém, para um sistema em escala de produção uma estratégia otimizada de troca de dados deve ser desenvolvida, dado que em uma jornada de trabalho de 8 horas possivelmente este limite será ultrapassado.

  \begin{figure}[H]
    \centering
    \caption{Gráfico de uso dos recursos do Firebase.}
    \includegraphics[width=1\textwidth]{./dados/figuras/usoDoFirebase}
    \label{fig:useFirebase}
    \fonte{Autoria própria (2021).}
\end{figure}

De maneira geral, o Firebase atendeu às aplicações e todos os testes de maneira estável e satisfatória, gerando apenas o erro de muitas requisições por dispositivo durante algumas inicializações do EPI inteligente. Este problema foi corrigido apenas reinicializando o dispositivo. 

<h1>EPI INTELIGENTE</h1>

A comunicação com cada sensor, bem como a leitura de cada uma de suas grandezas físicas e o envio e recebimento de dados para o servidor ocorreu de maneira esperada com o microcontrolador, como mostra a \autoref{fig:chamandoUsuario}. O dispositivo foi capaz de ler a informação de que seu usuário estava sendo chamado pelo gerente com a confirmação que todos os recursos estavam funcionando se prosseguiu com a calibração dos sensores.

\begin{figure}[H]
    \centering
    \caption{Dispositivo identificando uma chamada pelo supervisor.}
    \includegraphics[height= 0.4 \textwidth]{./dados/figuras/chamandoUsuario.jpg}
    \label{fig:chamandoUsuario}
    \fonte{Autoria própria (2021).}
\end{figure}
\newpage

<h1>CALIBRAÇÃO DOS SENSORES</h1>

Devido às limitações de tempo e acesso a equipamentos certificados para a calibração do EPI Inteligente, a mesma foi realizada com auxílio de aplicativos desenvolvido para celulares. Dessa forma, foi determinar a ordem de grandeza dos valores lidos pelos sensores. 

<h2>CALIBRAÇÃO DO SENSOR DE RUÍDO</h2>

 Para calibrar o sensor de ruído, o potenciômetro do dispositivo foi ajustado de forma a saída do sensor ser acionada apenas quando o ruído de impacto for emitido, não detectando o som ambiente. Com o auxílio do aplicativo Decibelímetro versão 2.07, foi captada uma amostra do som ambiente é conforme a \autoref{fig:decibelimetro}, o ruído de impacto possuiu a intensidade de 82 dB, ficando abaixo do nível de pico mínimo estabelecido pela \citeonline{NR9} que é de 120 dB. Para efeito de teste, foram arbitrados 4 impactos, a cada 5 segundos, como limite aceitável e 8 impactos, a cada 5 segundos, como limite máximo tolerável.


\begin{figure}[H]
    \centering
    \caption{Análise do ruído ambiente.}
    \includegraphics[height= 0.4 \textwidth]{dados/decibelimetro.jpg}
    \label{fig:decibelimetro}
    \fonte{Autoria própria (2021).}
\end{figure}

<h2>CALIBRAÇÃO DO SENSOR DE LUMINOSIDADE</h2>

Para calibrar o sensor de luminosidade, o dispositivo foi levado até um ambiente com luminosidade aceitável aferido com o auxílio do aplicativo Luxímetro versão 2.0, conforme a \autoref{fig:luximetro}, este valor medido foi definido como o limite mínimo. Posteriormente, o sistema foi levado a um ambiente com luminosidade ideal aferida pelo mesmo aplicativo e o valor medido neste local foi definido como limite aceitável. 

\begin{figure}[H]
    \centering
    \caption{Análise do ruído ambiente.}
    \includegraphics[height= 0.4 \textwidth]{dados/figuras/luxMeter.jpg}
    \label{fig:luximetro}
    \fonte{Autoria própria (2021).}
\end{figure}

<h2>CALIBRAÇÂO DO SENSOR DE TEMPERATURA E VIBRAÇÃO</h2>

Ambos sensores não foram calibrados utilizando uma ferramenta para tal. Portanto, foram utilizados os valores lidos diretamente para se estabelecer os limites de tolerância a estas grandezas sem nenhum método de calibração. Além disso, os limites de vibração foram estabelecidos arbitrariamente, conforme as vibrações provocadas manualmente. 

<h1>VALIDAÇÃO DO DISPOSITIVO</h1>

A validação se deu por meio de perturbações simuladas e os resultados foram de acordo com o esperado para os para todos os riscos ambientais quando exposto a níveis aceitáveis. Quando os limites foram ultrapassados o alarme foi apresentado ao usuário, conforme a \autoref{fig:alarme}, evidenciando o correto funcionamento do sistema de sinalização, leitura e processamento dos dados.

\begin{figure}[H]
    \centering
    \caption{Dispositivo apresentando alarme.}
    \includegraphics[height= 0.4 \textwidth]{./dados/usuarioEmRisco.jpg}
    \label{fig:alarme}
    \fonte{Autoria própria (2021).}
\end{figure}

O dispositivo também foi capaz de enviar corretamente os riscos aos quais o seu usuário estava configurado no banco de dados, podendo ser visualizados e interpretados de uma maneira intuitiva e rápida por meio da aplicação WEB que foi perfeitamente capaz de apresentar os resultados armazenados no Firebase, conforme \autoref{fig:alarmeWEB}.

\begin{figure}[H]
    \centering
    \caption{Alarme sendo apresentado na aplicação WEB.}
    \includegraphics[height= 0.4 \textwidth]{./dados/figuras/sistemaFuncionando.png}
    \label{fig:alarmeWEB}
    \fonte{Autoria própria (2021).}
\end{figure}
\chapter{CONCLUSÃO}

A proposta deste trabalho foi desenvolver um estudo de um dispositivo capaz de medir os riscos ambientais de luminosidade, temperatura, vibração e ruídos de impacto e os analisar conforme limites estabelecidos em norma e enviar uma resposta visual ao usuário por meio de LEDs. \par O dispositivo também deveria enviar um aviso ao supervisor do usuário por meio de uma aplicação \gls{web}.
Com o objetivo de desenvolver um sistema que atendesse todos os requisitos de projeto, foi desenvolvido um dispositivo físico com sensores embarcados capaz de medir todos os riscos mencionados. Além disso, desenvolveu-se uma aplicação \gls{web} capaz de prover estes dados de forma amigável ao supervisor e também um banco de dados capaz de armazenar toda informação necessária do sistema.
Os componentes específicos como microcontrolador e sensores foram selecionados com base uma análise de requisitos de projeto, preço e fácil acesso. O servidor e a aplicação \gls{web} funcionaram de maneira esperada, tendo a capacidade de apresentar os dados lidos pelos sensores de uma maneira fácil e intuitiva. O dispositivo foi capaz de se comunicar corretamente com o servidor e também de ler as grandezas físicas. Todo o código utilizado neste trabalho está disponível no endereço eletrônico https://github.com/YSteinmetz/E-EPI foi omitido apenas trechos do código que continham as credenciais de acesso ao banco de dados e a rede WiFi utilizada. 
\par Este trabalho foi um grande desafio, pois é extremamente multidisciplinar envolvendo diversas disciplinas cursadas e também muito conhecimento que adquirido fora da universidade. Os resultados corroboram que o sistema proposto de EPI inteligente poderá servir como base para novos estudos na área de proteção individual em ambientes industriais envolvendo temas relacionais à \gls{iot} e Indústria 4.0. 
\par Como trabalhos futuros, sugere-se:
\begin{itemize}
    \item Desenvolver um sistema para fixação do protótipo na roupa do usuário;
    \item Incluir outros tipos de sensores, como, por exemplo, gases tóxicos;
    \item Incorporar uma bateria para deixar o sistema totalmente embarcado, isto é, sem fios fornecimento de energia.
\end{itemize}
 
